function PicturePerfect(e,i){var t=this;i=i||{},t.options=i,t.img=e,t.initialized=!(0!=i.lazy&&t.lazyLoad),t.maxWindowSize=window.innerWidth,t.picturefill=function(){},"undefined"!=typeof picturefill&&(t.picturefill=picturefill),t._calculateSizes=function(){0!=i.calculateSize&&t.setElementSize&&t.setElementSize(e)},t._updateSources=function(){0!=i.dynamicSources&&t.updateSources&&t.updateSources(t.img)},t._mimicBackgroundImage=function(){0!=i.mimicBackgroundImage&&t.mimicBackgroundImage&&t.mimicBackgroundImage(t.img)},t.addClass=function(e){-1==t.img.className.indexOf(e)&&setTimeout(function(){t.img.className=t.img.className+=" "+e},10)},t.removeClass=function(e){var i=new RegExp(e,"gi");t.img.className=t.img.className.replace(i,"")},t.onProximity=function(){t.initialized&&(t.addClass("picture-perfect-ready"),t.img.addEventListener("load",t.onLoad),window.addEventListener("resize",function(){setTimeout(t.onResize,100)}),t._calculateSizes(),t._updateSources(),t.picturefill({reevaluate:!0}),t._mimicBackgroundImage())},t.onResize=function(){t.maxWindowSize<window.innerWidth&&(t.maxWindowSize=window.innerWidth,t._updateSources()),t._calculateSizes(),t.picturefill({reevaluate:!0}),t._mimicBackgroundImage()},t.onLoad=function(e){t.addClass("picture-perfect-loaded"),t._mimicBackgroundImage()},t.onLoadStart=function(e){t.removeClass("picture-perfect-loaded")},t.img.addEventListener("loadstart",t.onLoadStart),t.addClass("picture-perfect"),t.initialized?t.onProximity():t.lazyLoad(),t._mimicBackgroundImage(),window.addEventListener("load",function(){t.onProximity()})}var JIT_IMG=function(e,i){new PicturePerfect(e,i),e.onload=null};PicturePerfect.prototype.getCurrentSrcSize=function(e,i){var t=new Image;t.onload=function(){i({width:t.width,height:t.height})},t.src=e.currentSrc},PicturePerfect.prototype.mimicBackgroundImage=function(e){var i=e.closest("[mimic-background-image-wrapper]"),t=e.closest("[mimic-background-image-container]");if(!t||!i)return!1;this.getCurrentSrcSize(e,function(n){var a=i.currentStyle||window.getComputedStyle(i),o="cover"==a.backgroundSize,c="contain"==a.backgroundSize,r=t.getBoundingClientRect(),d=n.width/n.height*r.height,u=(n.height,n.width,r.width,r.width),l=r.height,s=d>=r.width;o?(s?u=d:l=n.height/n.width*r.width,e.style.width=s?"auto":"100%",e.style.height=s?"100%":"auto"):c&&(s?l=n.height/n.width*r.width:u=d,e.style.width=s?"100%":"auto",e.style.height=s?"auto":"100%");var m=a.backgroundPosition.split(" "),g=m[0],f=m[1];if(g.indexOf("px")>-1)e.style.left=g;else if(g.indexOf("%")>-1){var h=parseFloat(g.replace("%",""));e.style.left=(r.width-u)*(h/100)+"px"}else e.style.left=(r.width-u)/2+"px";if(f.indexOf("px")>-1)e.style.top=f;else if(f.indexOf("%")>-1){h=parseFloat(f.replace("%",""));e.style.top=(r.height-l)*(h/100)+"px"}else e.style.top=(r.height-l)/2+"px"})};